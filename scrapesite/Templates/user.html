<!DOCTYPE html>
<html lang="en">
<head>
    {% load staticfiles %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
    <meta charset="UTF-8">
    <title>RMIT Timetabler</title>

</head>

<body>

<div id="popupnone">
    <h3>Warning</h3><br><br>
    Classes seem to be missing from your timetable.<br><br>
    <button onclick="closePopup()" type="button" class="popupbutton">OK</button>
</div>

<div id="screennormal">

<table id="dayheaders">
    <th class="dayheader">
        Monday
    </th>
    <th class="dayheader">
        Tuesday
    </th>
    <th class="dayheader">
        Wednesday
    </th>
    <th class="dayheader">
        Thursday
    </th>
    <th class="dayheader">
        Friday
    </th>
</table>

<div id="page">

<table id="timeheaders">
    <tr>
        <td class="timeheader"></td>
    </tr>
    <tr>
        <td class="timeheader">7:00 AM</td>
    </tr>
    <tr>
        <td class="timeheader">8:00 AM</td>
    </tr>
    <tr>
        <td class="timeheader">9:00 AM</td>
    </tr>
    <tr>
        <td class="timeheader">10:00 AM</td>
    </tr>
    <tr>
        <td class="timeheader">11:00 AM</td>
    </tr>
    <tr>
        <td class="timeheader">12:00 PM</td>
    </tr>
    <tr>
        <td class="timeheader">1:00 PM</td>
    </tr>
    <tr>
        <td class="timeheader">2:00 PM</td>
    </tr>
    <tr>
        <td class="timeheader">3:00 PM</td>
    </tr>
    <tr>
        <td class="timeheader">4:00 PM</td>
    </tr>
    <tr>
        <td class="timeheader">5:00 PM</td>
    </tr>
    <tr>
        <td class="timeheader">6:00 PM</td>
    </tr>
    <tr>
        <td class="timeheader">7:00 PM</td>
    </tr>
    <tr>
        <td class="timeheader">8:00 PM</td>
    </tr>
    <tr>
        <td class="timeheader">9:00 PM</td>
    </tr>
    <tr>
        <td class="timeheader">10:00 PM</td>
    </tr>
</table>

<table id="timetable">


<div id="cells">

{% autoescape off %}
{% for d in divs %}
    {{ d }}
{% endfor %}
{% endautoescape %}

</div>

    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>

</table>

</div>


<div id="side">

<div id="banner">
    <h1>RMIT Timetabler</h1><br>
</div>

<div id="colorcodes">
Classes required in timetable:
<br>

{% autoescape off %}
{% for cc in colorcode %}
    {{ cc }}
{% endfor %}
{% endautoescape %}

{% autoescape off %}
{% for c in code %}
    {{ c }}
{% endfor %}
{% endautoescape %}

</div>

<br><br><br>

<div id="buttons">
<button onclick="hide()" type="button" class="button">Hide unselected classes</button>
<br><br>
<button onclick="show()" type="button" class="button">Show unselected classes</button>
<br><br>
<button onclick="finish()" type="button" class="button">Finish timetable</button>
<br><br>
</div>
</div>

</div>

<script>

function raise(div) {
    if (div.className.match(/(?:^|\s)cell(?!\S)/)) {
        div.className = "cellraised";
    }
    else {
        div.className = "cell";
    }
}

function hide() {
    var cells = document.getElementsByClassName('cell'), i;
    for (i = 0; i < cells.length; i += 1) {
        cells[i].style.display = 'none';
    }
}

function show() {
    var cells = document.getElementsByClassName('cell'), i;
    for (i = 0; i < cells.length; i += 1) {
        cells[i].style.display = '';
    }
}

function finish() {
    hide();
    var cells = document.getElementsByClassName("cellraised"), i;
    for (var i = cells.length-1; i >= 0; i--) {
        var x = cells[i].getBoundingClientRect();
        if (x.left >= 97 && x.left < 300) {
            cells[i].style.left = "97px";
        }
        else if (x.left >= 300 && x.left < 503) {
            cells[i].style.left = "300px";
        }
        else if (x.left >= 503 && x.left < 706) {
            cells[i].style.left = "503px";
        }
        else if (x.left >= 706 && x.left < 909) {
            cells[i].style.left = "706px";
        }
        else {
            cells[i].style.left = "909px";
        }
    }

    var cells = document.getElementsByClassName("cellraised"), i;
    for(var i = cells.length-1; i >= 0; i--) {
        cells[i].className = 'cellfinish';
    }

    var code = document.getElementsByClassName("code"), i;
    var k = 0;
    for(var i = code.length-1; i >= 0; i--) {
        var cells = document.getElementsByClassName("cellfinish"), j;
        for(var j = cells.length-1; j >= 0; j--) {
            if ((cells[j].style.background).includes(code[i].innerHTML)) {
                k++;
                j = 0;
            }
        }
    }
    if (k < code.length) {
        var screen = document.getElementById("screennormal");
        var popup = document.getElementById("popupnone");
        screen.id = "screenpopup";
        popup.id = "popup";
    }
}

function closePopup() {
    var screen = document.getElementById("screenpopup");
    var popup = document.getElementById("popup");
    screen.id = "screennormal";
    popup.id = "popupnone";
}


</script>


</body>

</html>